<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Detalhes da Solicita√ß√£o</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" th:href="@{/solicitacao}"
          >üè≠ Sistema de Manuten√ß√£o</a
        >
      </div>
    </nav>

    <main class="container mt-4">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h4 class="mb-0">
                Detalhes da Solicita√ß√£o #[[${solicitacao.id}]]
              </h4>
              <span
                th:if="${solicitacao.status == 'ABERTA'}"
                class="badge bg-warning text-dark fs-6"
                >ABERTA</span
              >
              <span
                th:if="${solicitacao.status == 'EM_ANDAMENTO'}"
                class="badge bg-info fs-6"
                >EM ANDAMENTO</span
              >
              <span
                th:if="${solicitacao.status == 'FINALIZADA'}"
                class="badge bg-success fs-6"
                >FINALIZADA</span
              >
            </div>
            <div class="card-body">
              <!-- Informa√ß√µes B√°sicas -->
              <div class="row mb-4">
                <div class="col-md-6">
                  <div class="mb-3">
                    <strong class="text-primary">Solicitante:</strong><br />
                    [[${solicitacao.nomeSolicitante}]]
                  </div>
                  <div class="mb-3">
                    <strong class="text-primary">Data/Hora Abertura:</strong
                    ><br />
                    <span class="text-success">
                      [[${#temporals.format(solicitacao.dataHoraAbertura,
                      'dd/MM/yyyy HH:mm')}]]
                    </span>
                  </div>
                </div>
                <div class="col-md-6">
                  <div
                    th:if="${solicitacao.status == 'FINALIZADA'}"
                    class="mb-3"
                  >
                    <strong class="text-primary">Data/Hora Encerramento:</strong
                    ><br />
                    <span class="text-success fw-bold">
                      [[${#temporals.format(solicitacao.dataHoraEncerramento,
                      'dd/MM/yyyy HH:mm')}]]
                    </span>
                  </div>
                  <div th:if="${solicitacao.status == 'ABERTA'}" class="mb-3">
                    <strong class="text-primary">Data/Hora Encerramento:</strong
                    ><br />
                    <span class="text-muted">Aguardando finaliza√ß√£o</span>
                  </div>
                </div>
              </div>

              <!-- Descri√ß√£o do Problema -->
              <div class="mb-4">
                <strong class="text-primary">Descri√ß√£o do Problema:</strong>
                <div class="p-3 bg-light rounded mt-2">
                  [[${solicitacao.descricaoProblema}]]
                </div>
              </div>

              <!-- Informa√ß√µes de Encerramento (se finalizada) -->
              <div
                th:if="${solicitacao.status == 'FINALIZADA'}"
                class="mt-4 p-3 border rounded bg-light"
              >
                <h5 class="text-success">üìã Informa√ß√µes de Encerramento</h5>
                <div class="row mt-3">
                  <div class="col-md-6">
                    <strong>Respons√°vel pela Manuten√ß√£o:</strong><br />
                    <span class="fw-bold"
                      >[[${solicitacao.responsavelManutencao}]]</span
                    >
                  </div>
                  <div class="col-md-6">
                    <strong>Data/Hora Finaliza√ß√£o:</strong><br />
                    <span class="fw-bold text-success">
                      [[${#temporals.format(solicitacao.dataHoraEncerramento,
                      'dd/MM/yyyy HH:mm')}]]
                    </span>
                  </div>
                </div>

                <div th:if="${solicitacao.observacoesManutencao}" class="mt-3">
                  <strong>Observa√ß√µes da Manuten√ß√£o:</strong>
                  <div class="p-3 bg-white rounded mt-2 border">
                    [[${solicitacao.observacoesManutencao}]]
                  </div>
                </div>
              </div>

              <!-- Resumo do Tempo (se finalizada) -->
              <div
                th:if="${solicitacao.status == 'FINALIZADA'}"
                class="alert alert-success mt-3"
              >
                <strong>üìä Resumo do Atendimento:</strong><br />
                Solicita√ß√£o aberta em:
                [[${#temporals.format(solicitacao.dataHoraAbertura, 'dd/MM/yyyy
                HH:mm')}]]<br />
                Solicita√ß√£o finalizada em:
                [[${#temporals.format(solicitacao.dataHoraEncerramento,
                'dd/MM/yyyy HH:mm')}]]
              </div>

              <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                <a th:href="@{/solicitacao}" class="btn btn-primary"
                  >Voltar para Lista</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
